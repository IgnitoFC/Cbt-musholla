04.25 13.56
admin.html
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - CBT Nurul Ikhwan</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 0;
    }
    header {
      background: #00264d;
      color: white;
      padding: 20px;
      text-align: center;
    }
    nav {
      display: flex;
      justify-content: center;
      background: #e0e0e0;
      padding: 10px;
      gap: 10px;
    }
    nav button {
      background: #004080;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
    }
    section {
      display: none;
      padding: 20px;
      max-width: 900px;
      margin: auto;
      background: white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      border-radius: 8px;
      margin-top: 20px;
    }
    section.active { display: block; }
    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin: 6px 0 15px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    label { font-weight: bold; display: block; margin-bottom: 6px; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    table th, table td {
      padding: 10px;
      border: 1px solid #ddd;
      text-align: left;
    }
    .btn-red { background: crimson; color: white; padding: 6px 12px; border: none; border-radius: 6px; cursor: pointer; }
  </style>
</head>
<body>
  <header>
    <h2>Admin Panel - CBT Musholla Nurul Ikhwan</h2>
  </header>

  <nav>
    <button onclick="showTab('mapel')">Mapel</button>
    <button onclick="showTab('soal')">Soal</button>
    <button onclick="showTab('akun')">Akun</button>
    <button onclick="showTab('token')">Token & Waktu</button>
    <button onclick="showTab('nilai')">Nilai</button>
  </nav>

  <section id="mapel">
    <h3>Kelola Mapel</h3>
    <label>Nama Mapel Baru:</label>
    <input type="text" id="mapelBaru" placeholder="Contoh: PAI">
    <button onclick="tambahMapel()">Tambah Mapel</button>
    <ul id="daftarMapel"></ul>
  </section>

  <section id="soal">
    <h3>Tambah Soal</h3>
    <select id="mapelSoal"></select>
    <textarea id="pertanyaan" placeholder="Tulis pertanyaan di sini"></textarea>
    <label>Gambar (opsional):</label>
    <input type="text" id="gambar" placeholder="URL gambar (jika ada)">
    <label>Tipe Soal:</label>
    <select id="tipeSoal">
      <option value="pg">Pilihan Ganda</option>
      <option value="pgk">Pilihan Ganda Kompleks</option>
      <option value="bs">Benar / Salah</option>
    </select>
    <label>Opsi A - D:</label>
    <input type="text" id="opsiA" placeholder="Opsi A">
    <input type="text" id="opsiB" placeholder="Opsi B">
    <input type="text" id="opsiC" placeholder="Opsi C">
    <input type="text" id="opsiD" placeholder="Opsi D">
    <label>Kunci Jawaban:</label>
    <input type="text" id="kunci" placeholder="Contoh: A">
    <button onclick="simpanSoal()">Simpan Soal</button>
    <div id="listSoal"></div>
  </section>

  <section id="akun">
    <h3>Kelola Akun Peserta</h3>
    <input type="text" id="akunUser" placeholder="Username">
    <input type="text" id="akunPass" placeholder="Password">
    <button onclick="tambahAkun()">Tambah Akun</button>
    <table id="akunTable">
      <thead><tr><th>Username</th><th>Password</th><th>Aksi</th></tr></thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="token">
    <h3>Token dan Waktu</h3>
    <label>Token Saat Ini:</label>
    <input type="text" id="tokenAktif" placeholder="Token saat ini">
    <label>Durasi Ujian (menit):</label>
    <input type="number" id="durasiUjian" placeholder="Contoh: 30">
    <button onclick="simpanPengaturan()">Simpan Pengaturan</button>
  </section>

  <section id="nilai">
    <h3>Nilai Peserta</h3>
    <div id="listNilai">Loading...</div>
  </section>

  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyC-PGsyOliTaj-unpWwuB3cb9N11Gcpl7M",
      authDomain: "cbt-musholla.firebaseapp.com",
      projectId: "cbt-musholla",
      storageBucket: "cbt-musholla.firebasestorage.app",
      messagingSenderId: "1012621765788",
      appId: "1:1012621765788:web:86ef7078db1811847d1159"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    function showTab(id) {
      document.querySelectorAll("section").forEach(sec => sec.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    function tambahMapel() {
      const nama = document.getElementById("mapelBaru").value.trim();
      if (!nama) return;
      db.collection("mapel").doc(nama).set({});
      document.getElementById("mapelBaru").value = "";
      loadMapel();
    }

    function loadMapel() {
      const ul = document.getElementById("daftarMapel");
      const sel = document.getElementById("mapelSoal");
      ul.innerHTML = "";
      sel.innerHTML = "";
      db.collection("mapel").get().then(snap => {
        snap.forEach(doc => {
          ul.innerHTML += `<li>${doc.id}</li>`;
          sel.innerHTML += `<option value="${doc.id}">${doc.id}</option>`;
        });
      });
    }

    function simpanSoal() {
      const data = {
        mapel: document.getElementById("mapelSoal").value,
        pertanyaan: document.getElementById("pertanyaan").value,
        gambar: document.getElementById("gambar").value,
        tipe: document.getElementById("tipeSoal").value,
        opsi: {
          A: document.getElementById("opsiA").value,
          B: document.getElementById("opsiB").value,
          C: document.getElementById("opsiC").value,
          D: document.getElementById("opsiD").value
        },
        kunci: document.getElementById("kunci").value.toUpperCase()
      };
      db.collection("soal").add(data);
      document.getElementById("pertanyaan").value = "";
      document.getElementById("gambar").value = "";
      document.getElementById("opsiA").value = "";
      document.getElementById("opsiB").value = "";
      document.getElementById("opsiC").value = "";
      document.getElementById("opsiD").value = "";
      document.getElementById("kunci").value = "";
    }

    function tambahAkun() {
      const u = document.getElementById("akunUser").value.trim();
      const p = document.getElementById("akunPass").value.trim();
      if (u && p) {
        db.collection("akun").add({ username: u, password: p });
        document.getElementById("akunUser").value = "";
        document.getElementById("akunPass").value = "";
        loadAkun();
      }
    }

    function loadAkun() {
      const tbody = document.querySelector("#akunTable tbody");
      tbody.innerHTML = "";
      db.collection("akun").get().then(snap => {
        snap.forEach(doc => {
          const tr = document.createElement("tr");
          tr.innerHTML = `<td>${doc.data().username}</td><td>${doc.data().password}</td><td><button class="btn-red" onclick="hapusAkun('${doc.id}')">Hapus</button></td>`;
          tbody.appendChild(tr);
        });
      });
    }

    function hapusAkun(id) {
      db.collection("akun").doc(id).delete().then(loadAkun);
    }

    function simpanPengaturan() {
      const token = document.getElementById("tokenAktif").value;
      const durasi = parseInt(document.getElementById("durasiUjian").value);
      db.collection("pengaturan").doc("token").set({ aktif: token });
      db.collection("pengaturan").doc("waktu").set({ durasi: durasi });
    }

    function loadNilai() {
      const div = document.getElementById("listNilai");
      div.innerHTML = "";
      db.collection("jawaban").where("submit", "==", true).get().then(snap => {
        snap.forEach(doc => {
          const data = doc.data();
          div.innerHTML += `<p><strong>${data.user}</strong> (${data.mapel}) - Terkumpul</p>`;
        });
      });
    }

    loadMapel();
    loadAkun();
    loadNilai();
    showTab("mapel");
  </script>
</body>
</html>
